(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22061bbc"],{2784:function(e,t,s){"use strict";var a=s("a799"),o=s.n(a);o.a},"5ebe":function(e,t,s){},"6d41":function(e,t,s){"use strict";var a=s("af06"),o=s.n(a);o.a},7159:function(e,t,s){e.exports=s.p+"img/img.146655c9.jpg"},a799:function(e,t,s){},af06:function(e,t,s){},bfe9:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("v-head"),s("v-sidebar"),s("div",{staticClass:"content-box",class:{"content-collapse":e.collapse}},[s("div",{staticClass:"content"},[s("transition",{attrs:{name:"move",mode:"out-in"}},[s("router-view")],1)],1)]),s("alarm-dialog",{attrs:{datas:e.alarmDialog.data,show:e.alarmDialog.visible},on:{"update:show":function(t){return e.$set(e.alarmDialog,"visible",t)}}})],1)},o=[],i=(s("7f7f"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("div",{staticClass:"collapse-btn",on:{click:e.collapseChage}},[s("i",{staticClass:"el-icon-menu"})]),s("div",{staticClass:"logo"},[e._v("巨硅云广播")]),s("div",{staticClass:"header-right"},[s("div",{staticClass:"header-user-con"},[s("div",{staticClass:"btn-bell"},[s("el-tooltip",{attrs:{effect:"dark",content:e.message?"有"+e.message+"条未读消息":"报警记录",placement:"bottom"}},[s("router-link",{attrs:{to:"/alarm-record"}},[s("i",{staticClass:"el-icon-bell"})])],1),e.message?s("span",{staticClass:"btn-bell-badge"}):e._e()],1),e._m(0),s("el-dropdown",{staticClass:"user-name",attrs:{trigger:"click"},on:{command:e.handleCommand}},[s("span",{staticClass:"el-dropdown-link"},[e._v("\n                    "+e._s(e.username)+" "),s("i",{staticClass:"el-icon-caret-bottom"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.accountInfo()}}},[s("el-dropdown-item",[e._v("账户消息")])],1),s("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.changePass()}}},[s("el-dropdown-item",[e._v("修改密码")])],1),s("el-dropdown-item",{attrs:{divided:"",command:"loginout"}},[e._v("退出登录")])],1)],1)],1)]),s("change-pass-dialog",{attrs:{show:e.changePassDialogVisible},on:{"update:show":function(t){e.changePassDialogVisible=t}}}),s("account-info-dialog",{attrs:{show:e.accountInfoDialogVisible},on:{"update:show":function(t){e.accountInfoDialogVisible=t}}})],1)}),n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-avator"},[a("img",{attrs:{src:s("7159")}})])}],l=s("2b0e"),c=new l["default"],r=c,u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:"修改密码",visible:e.visible},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.closeDialog()}}},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"输入原密码"}},[s("el-input",{model:{value:e.oldPassw,callback:function(t){e.oldPassw=t},expression:"oldPassw"}})],1),s("el-form-item",{attrs:{label:"输入新密码"}},[s("el-input",{model:{value:e.friNewPass,callback:function(t){e.friNewPass=t},expression:"friNewPass"}})],1),s("el-form-item",{attrs:{label:"再输入新密码"}},[s("el-input",{model:{value:e.secNewPass,callback:function(t){e.secNewPass=t},expression:"secNewPass"}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.comfirm()}}},[e._v("确 定")])],1)],1)],1)},d=[],m={name:"change-pass-dialog",data:function(){return{visible:this.show,form:{name:"",date:"",address:""},oldPassw:"",friNewPass:"",secNewPass:""}},props:{show:{type:Boolean,default:!1},EDIT:{type:String},datas:{type:Object}},watch:{show:function(){console.log(this.datas),this.form=this.datas,this.visible=this.show}},created:function(){},methods:{comfirm:function(){this.visible=!1},closeDialog:function(){this.oldPassw="",this.friNewPass="",this.secNewPass="",this.$emit("update:show",!1)}}},f=m,h=s("2877"),p=Object(h["a"])(f,u,d,!1,null,null,null),b=p.exports,v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:"账户信息",visible:e.visible},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.closeDialog()}}},[s("el-form",{ref:"form",attrs:{"label-width":"100px"}},[s("div",{staticClass:"upload-box"},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?s("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),s("el-form-item",{attrs:{label:"账号"}},[s("el-input",{model:{value:e.accountID,callback:function(t){e.accountID=t},expression:"accountID"}})],1),s("el-form-item",{attrs:{label:"姓名"}},[s("el-input",{model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1),s("el-form-item",{attrs:{label:"联系电话"}},[s("el-input",{model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),s("el-form-item",{attrs:{label:"邮箱"}},[s("el-input",{model:{value:e.mail,callback:function(t){e.mail=t},expression:"mail"}})],1),s("el-form-item",{attrs:{label:"所属机构"}},[s("el-input",{model:{value:e.org,callback:function(t){e.org=t},expression:"org"}})],1),s("el-form-item",{attrs:{label:"部门"}},[s("el-input",{model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})],1),s("el-form-item",{attrs:{label:"职位"}},[s("el-input",{model:{value:e.job,callback:function(t){e.job=t},expression:"job"}})],1),s("el-form-item",{attrs:{label:"员工编号"}},[s("el-input",{model:{value:e.employeeID,callback:function(t){e.employeeID=t},expression:"employeeID"}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.comfirm()}}},[e._v("确 定")])],1)],1)],1)},g=[],w={name:"account-info-dialog",data:function(){return{visible:this.show,imageUrl:"",accountID:"",userName:"",phone:"",mail:"",org:"",department:"",job:"",employeeID:""}},props:{show:{type:Boolean,default:!1},EDIT:{type:String},datas:{type:Object}},watch:{show:function(){console.log(this.datas),this.form=this.datas,this.dialogTitle=this.title,this.visible=this.show}},created:function(){},methods:{comfirm:function(){this.visible=!1},handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,s=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&s},closeDialog:function(){this.imageUrl="",this.accountID="",this.userName="",this.phone="",this.mail="",this.org="",this.department="",this.job="",this.employeeID="",this.$emit("update:show",!1)}}},k=w,x=(s("d982"),Object(h["a"])(k,v,g,!1,null,"38e8ef1a",null)),_=x.exports,D={components:{changePassDialog:b,accountInfoDialog:_},data:function(){return{collapse:!1,fullscreen:!1,name:"header",message:2,changePassDialogVisible:!1,accountInfoDialogVisible:!1}},computed:{username:function(){var e=localStorage.getItem("ms_username");return e||this.name}},methods:{handleCommand:function(e){"loginout"==e&&(localStorage.removeItem("ms_username"),this.$router.push("/login"))},collapseChage:function(){this.collapse=!this.collapse,r.$emit("collapse",this.collapse)},handleFullScreen:function(){var e=document.documentElement;this.fullscreen?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.fullscreen=!this.fullscreen},changePass:function(){this.changePassDialogVisible=!0},accountInfo:function(){this.accountInfoDialogVisible=!0}},mounted:function(){document.body.clientWidth<1500&&this.collapseChage()}},$=D,y=(s("6d41"),Object(h["a"])($,i,n,!1,null,"d6449774",null)),I=y.exports,C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sidebar"},[s("el-menu",{staticClass:"sidebar-el-menu",attrs:{"default-active":e.onRoutes,collapse:e.collapse,"background-color":"#324157","text-color":"#bfcbd9","active-text-color":"#20a0ff","unique-opened":"",router:""}},[e._l(e.items,function(t){return[t.subs?[s("el-submenu",{key:t.index,attrs:{index:t.index}},[s("template",{slot:"title"},[s("i",{class:t.icon}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])]),e._l(t.subs,function(t){return[t.subs?s("el-submenu",{key:t.index,attrs:{index:t.index}},[s("template",{slot:"title"},[e._v(e._s(t.title))]),e._l(t.subs,function(t,a){return s("el-menu-item",{key:a,attrs:{index:t.index}},[e._v("\n                                "+e._s(t.title)+"\n                            ")])})],2):s("el-menu-item",{key:t.index,attrs:{index:t.index}},[e._v("\n                            "+e._s(t.title)+"\n                        ")])]})],2)]:[s("el-menu-item",{key:t.index,attrs:{index:t.index}},[s("i",{class:t.icon}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])])]]})],2)],1)},P=[],N=(s("a481"),{data:function(){return{collapse:!1,items:[{icon:"el-icon-map-location",index:"broadcast-map",title:"广播地图"},{icon:"el-icon-connection",index:"broadcast-group",title:"分组管理"},{icon:"el-icon-help",index:"11",title:"设备管理",subs:[{index:"device-monitoring",title:"设备监控"},{index:"device-import",title:"设备导入"},{index:"alarm-record",title:"报警记录"},{index:"repair-order",title:"报修工单"},{index:"remote-control",title:"远程控制"}]},{icon:"el-icon-headset",index:"21",title:"广播管理",subs:[{index:"broadcast-manager",title:"调频广播管理"},{index:"audio-manager",title:"音频管理"},{index:"guide-audio",title:"前导音"},{index:"urgency-broadcast",title:"紧急广播"}]},{icon:"el-icon-office-building",index:"organ-manager",title:"机构管理"},{icon:"el-icon-s-data",index:"analysis-chart",title:"统计分析"},{icon:"el-icon-user",index:"31",title:"用户管理",subs:[{index:"system-account",title:"系统用户管理"},{index:"app-account",title:"App用户管理"},{index:"device-account",title:"设备用户管理"}]},{icon:"el-icon-setting",index:"system-manager",title:"系统管理"}]}},computed:{onRoutes:function(){return this.$route.path.replace("/","")}},created:function(){var e=this;r.$on("collapse",function(t){e.collapse=t})}}),L=N,S=(s("2784"),Object(h["a"])(L,C,P,!1,null,"b0fb54dc",null)),j=S.exports,T=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.showTags?s("div",{staticClass:"tags"},[s("ul",e._l(e.tagsList,function(t,a){return s("li",{key:a,staticClass:"tags-li",class:{active:e.isActive(t.path)}},[s("router-link",{staticClass:"tags-li-title",attrs:{to:t.path}},[e._v("\n                "+e._s(t.title)+"\n            ")]),s("span",{staticClass:"tags-li-icon",on:{click:function(t){return e.closeTags(a)}}},[s("i",{staticClass:"el-icon-close"})])],1)}),0),s("div",{staticClass:"tags-close-box"},[s("el-dropdown",{on:{command:e.handleTags}},[s("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("\n                标签选项"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown",size:"small"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"other"}},[e._v("关闭其他")]),s("el-dropdown-item",{attrs:{command:"all"}},[e._v("关闭所有")])],1)],1)],1)]):e._e()},F=[],O={data:function(){return{tagsList:[]}},methods:{isActive:function(e){return e===this.$route.fullPath},closeTags:function(e){var t=this.tagsList.splice(e,1)[0],s=this.tagsList[e]?this.tagsList[e]:this.tagsList[e-1];s?t.path===this.$route.fullPath&&this.$router.push(s.path):this.$router.push("/")},closeAll:function(){this.tagsList=[],this.$router.push("/")},closeOther:function(){var e=this,t=this.tagsList.filter(function(t){return t.path===e.$route.fullPath});this.tagsList=t},setTags:function(e){var t=this.tagsList.some(function(t){return t.path===e.fullPath});t||(this.tagsList.length>=8&&this.tagsList.shift(),this.tagsList.push({title:e.meta.title,path:e.fullPath,name:e.matched[1].components.default.name})),r.$emit("tags",this.tagsList)},handleTags:function(e){"other"===e?this.closeOther():this.closeAll()}},computed:{showTags:function(){return this.tagsList.length>0}},watch:{$route:function(e,t){this.setTags(e)}},created:function(){var e=this;this.setTags(this.$route),r.$on("close_current_tags",function(){for(var t=0,s=e.tagsList.length;t<s;t++){var a=e.tagsList[t];if(a.path===e.$route.fullPath){t<s-1?e.$router.push(e.tagsList[t+1].path):t>0?e.$router.push(e.tagsList[t-1].path):e.$router.push("/"),e.tagsList.splice(t,1);break}}})}},R=O,V=(s("c5f3"),Object(h["a"])(R,T,F,!1,null,null,null)),E=V.exports,A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:"十户联防报警",visible:e.visible},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.closeDialog()}}},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"用户ID"}},[s("el-input",{model:{value:e.form.accountID,callback:function(t){e.$set(e.form,"accountID",t)},expression:"form.accountID"}})],1),s("el-form-item",{attrs:{label:"姓名"}},[s("el-input",{model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),s("el-form-item",{attrs:{label:"联系电话"}},[s("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),s("el-form-item",{attrs:{label:"十户联防"}},[s("el-input",{model:{value:e.form.defenceGroupName,callback:function(t){e.$set(e.form,"defenceGroupName",t)},expression:"form.defenceGroupName"}})],1),s("el-form-item",{attrs:{label:"地址"}},[s("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),s("el-form-item",{attrs:{label:"设备ID"}},[s("el-input",{model:{value:e.form.deviceID,callback:function(t){e.$set(e.form,"deviceID",t)},expression:"form.deviceID"}})],1),s("el-form-item",{attrs:{label:"设备型号"}},[s("el-input",{model:{value:e.form.deviceModal,callback:function(t){e.$set(e.form,"deviceModal",t)},expression:"form.deviceModal"}})],1),s("el-form-item",{attrs:{label:"设备电话"}},[s("el-input",{model:{value:e.form.devicePhone,callback:function(t){e.$set(e.form,"devicePhone",t)},expression:"form.devicePhone"}})],1),s("el-form-item",{attrs:{label:"审核结果"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.verifyValue,callback:function(t){e.$set(e.form,"verifyValue",t)},expression:"form.verifyValue"}},e._l(e.verifyOptions,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.comfirm()}}},[e._v("确 定")])],1)],1)],1)},q=[],U={name:"alarm-dialog",data:function(){return{visible:this.show,form:{streamingNo:"",defenceId:"",accountID:"",userName:"",phone:"",defenceGroupName:"",address:"",deviceID:"",deviceModal:"",devicePhone:"",verifyValue:"0"},verifyOptions:[{value:"0",label:"待处理"},{value:"1",label:"核实"},{value:"2",label:"误报"}]}},props:{show:{type:Boolean,default:!1},EDIT:{type:String},datas:{type:Object}},watch:{show:function(){var e=this;this.$nextTick(function(){void 0!==e.datas&&e.datas!=={}&&e.visible&&(e.form={streamingNo:e.datas.streamingNo,defenceId:e.datas.defenceId,accountID:e.datas.userId,userName:e.datas.userName,phone:e.datas.phone,defenceGroupName:e.datas.defenceGroupName,address:e.datas.address,deviceID:e.datas.deviceId,deviceModal:e.datas.deviceType,devicePhone:e.datas.deviceSim,verifyValue:"0"})}),this.visible=this.show}},created:function(){},methods:{comfirm:function(){var e=this;this.$confirm("请确认审核结果，检查无误后请点击确定","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.submitAlarm()}).catch(function(){})},submitAlarm:function(){var e=this,t={auditFlag:this.form.verifyValue,defenceId:this.form.defenceId,userId:this.form.userId};this.$api.alarmRecord.approveDefenceAlarmRecord(t).then(function(t){e.visible=!1,e.$message.success("审核成功")}).catch(function(t){e.$message.error("审核失败，请重试")})},closeDialog:function(){this.form={streamingNo:"",defenceId:"",accountID:"",userName:"",phone:"",defenceGroupName:"",address:"",deviceID:"",deviceModal:"",devicePhone:"",verifyValue:"0"},this.$refs["form"].resetFields(),this.$emit("update:show",!1)}}},G=U,z=Object(h["a"])(G,A,q,!1,null,null,null),M=z.exports,B={data:function(){return{tagsList:[],collapse:!1,alarmDialog:{visible:!1,title:"",edit:!1,data:{}},websock:null,lockReconnect:!1,timeoutnum:null}},components:{vHead:I,vSidebar:j,vTags:E,alarmDialog:M},created:function(){var e=this;r.$on("collapse",function(t){e.collapse=t}),r.$on("tags",function(t){for(var s=[],a=0,o=t.length;a<o;a++)t[a].name&&s.push(t[a].name);e.tagsList=s}),this.initWebSocket()},destroyed:function(){this.websocketclose()},methods:{initWebSocket:function(){var e="ws://192.168.0.115:9080/network-speaker-web/alarm";this.websock=new WebSocket(e),this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onmessage=this.websocketonmessage,this.websock.onclose=this.websocketclose},reconnect:function(){var e=this;e.lockReconnect||(e.lockReconnect=!0,e.timeoutnum&&clearTimeout(e.timeoutnum),e.timeoutnum=setTimeout(function(){e.initWebSocket(),e.lockReconnect=!1},5e3))},websocketonopen:function(){console.log("连接成功")},websocketonerror:function(e){console.log("WebSocket连接发生错误"),this.reconnect()},websocketclose:function(e){console.log("断开连接 ("+e+")"),this.reconnect()},websocketonmessage:function(e){var t=JSON.parse(e.data);this.alarmDialog={visible:!0,title:"",edit:!1,data:t.row}},websocketsend:function(e){this.websock.send(e)}}},W=B,J=Object(h["a"])(W,a,o,!1,null,null,null);t["default"]=J.exports},c5f3:function(e,t,s){"use strict";var a=s("5ebe"),o=s.n(a);o.a},d982:function(e,t,s){"use strict";var a=s("eeef"),o=s.n(a);o.a},eeef:function(e,t,s){}}]);