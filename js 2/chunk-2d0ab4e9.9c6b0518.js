(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab4e9"],{"155d":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("div",{staticClass:"container"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"分组管理",name:"group"}},[a("group-manager")],1),a("el-tab-pane",{attrs:{label:"十户联防",lazy:!0,name:"defence"}},[a("defence-manager")],1)],1)],1)])},i=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"container-tab"},[a("el-row",{staticClass:"handle-box",attrs:{gutter:10}},[a("el-col",{attrs:{md:4}},[a("el-cascader",{attrs:{options:e.areaOptions,"show-all-levels":!1,clearable:"",filterable:"",placeholder:"搜索或选择机构"},on:{clear:function(t){return e.getData(!0)},change:e.areaChange},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.node,i=t.data;return[a("span",[e._v(e._s(i.label))]),l.isLeaf?e._e():a("span",[e._v(" ("+e._s(i.children.length)+") ")])]}}]),model:{value:e.areaValue,callback:function(t){e.areaValue=t},expression:"areaValue"}})],1),a("el-col",{attrs:{md:6}},[a("el-input",{staticClass:" mr10",attrs:{clearable:"",placeholder:"输入分组/用户姓名"},on:{clear:e.search},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.selectWord,callback:function(t){e.selectWord=t},expression:"selectWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"},[e._v("搜索")])],1)],1),a("el-col",{attrs:{md:14}},[a("el-button",{staticClass:"r",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",disabled:1!=e.multipleSelection.length},on:{click:function(t){return e.openGroupPlaybills()}}},[e._v("节目单详情")]),a("el-button",{staticClass:"r",attrs:{type:"primary",disabled:1!=e.multipleSelection.length},on:{click:function(t){return e.openDeviceListDetail()}}},[e._v("设备详情")]),a("el-button",{staticClass:"r",attrs:{type:"danger",disabled:0==e.multipleSelection.length},on:{click:function(t){return e.handleDelete()}}},[a("i",{staticClass:"el-icon-delete el-icon--left"}),e._v("删除")]),a("el-button",{staticClass:"r",attrs:{type:"primary"},on:{click:function(t){return e.getData(!1)}}},[a("i",{staticClass:"el-icon-refresh el-icon--left"}),e._v("刷新")]),a("el-button",{staticClass:"r",attrs:{type:"success"},on:{click:function(t){return e.addGroup()}}},[a("i",{staticClass:"el-icon-plus el-icon--left"}),e._v("添加")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"row-key":e.getRowKeys,height:e.tableHeight,align:"center"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0,align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"groupName",label:"分组名称",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"volume",label:"音量",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"deviceNum",label:"设备个数",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"fm",label:"调配节目单",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"mp",label:"音频节目单",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.editGroup("编辑分组",t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:e.totalCount},on:{"current-change":e.handleCurrentChange}})],1)],1),a("edit-group-dialog",{attrs:{updataTable:e.getData,EDIT:e.playbillDetailDialog.edit,datas:e.playbillDetailDialog.data,title:e.playbillDetailDialog.title,show:e.playbillDetailDialog.visible},on:{"update:show":function(t){return e.$set(e.playbillDetailDialog,"visible",t)}}}),a("device-list-dialog",{attrs:{updataTable:e.getData,datas:e.deviceListDialog.data,show:e.deviceListDialog.visible},on:{"update:show":function(t){return e.$set(e.deviceListDialog,"visible",t)}}}),a("group-playbills-dialog",{attrs:{datas:e.groupPlaybillsDialog.data,show:e.groupPlaybillsDialog.visible},on:{"update:show":function(t){return e.$set(e.groupPlaybillsDialog,"visible",t)}}})],1)},n=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"设备详情",visible:e.visible,width:"75%"},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.$emit("update:show",!1)}}},[a("div",{staticClass:"table"},[a("div",{staticClass:"container-tab"},[a("el-row",{staticClass:"handle-box",attrs:{gutter:10}},[a("el-col",{attrs:{md:5}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{"show-all-levels":!1,options:e.areaOptions,clearable:"",filterable:"",placeholder:"搜索或选择机构"},on:{clear:function(t){return e.getData(!0)},change:e.areaChange},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.node,i=t.data;return[a("span",[e._v(e._s(i.label))]),l.isLeaf?e._e():a("span",[e._v(" ("+e._s(i.children.length)+") ")])]}}]),model:{value:e.areaValue,callback:function(t){e.areaValue=t},expression:"areaValue"}})],1),a("el-col",{attrs:{md:9}},[a("el-input",{staticClass:" mr10",staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"输入用户姓名"},on:{clear:function(t){return e.getData(!0)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.selectWord,callback:function(t){e.selectWord=t},expression:"selectWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"},[e._v("搜索")])],1)],1),a("el-col",{attrs:{md:10}},[a("el-button",{staticClass:"r",staticStyle:{"margin-left":"10px"},attrs:{type:"danger",disabled:0==e.multipleSelection.length},on:{click:function(t){return e.handleDelete()}}},[a("i",{staticClass:"el-icon-delete el-icon--left"}),e._v("删除")]),a("el-button",{staticClass:"r",attrs:{type:"primary"}},[a("i",{staticClass:"el-icon-refresh el-icon--left"}),e._v("刷新")]),a("el-button",{staticClass:"r",attrs:{type:"success"},on:{click:function(t){return e.addDevice()}}},[a("i",{staticClass:"el-icon-plus el-icon--left"}),e._v("添加")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"row-key":e.getRowKeys,height:e.tableHeight,align:"center"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0,align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"IMEI",label:"IMEI",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"userName",label:"用户名",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"address",label:"家庭地址",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"telphone",label:"联系电话",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:e.totalCount},on:{"current-change":e.handleCurrentChange}})],1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.comfirm()}}},[e._v("确 定")])],1)]),a("device-add-dialog",{attrs:{updataTable:e.getData,datas:e.deviceAddDialog.data,show:e.deviceAddDialog.visible},on:{"update:show":function(t){return e.$set(e.deviceAddDialog,"visible",t)}}})],1)},r=[],c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"添加设备",visible:e.visible,width:"75%"},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.$emit("update:show",!1)}}},[a("div",{staticClass:"table"},[a("div",{staticClass:"container-tab"},[a("el-row",{staticClass:"handle-box",attrs:{gutter:10}},[a("el-col",{attrs:{md:6}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{"show-all-levels":!1,options:e.areaOptions,clearable:"",filterable:"",placeholder:"搜索或选择机构"},on:{clear:function(t){return e.getData(!0)},change:e.areaChange},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.node,i=t.data;return[a("span",[e._v(e._s(i.label))]),l.isLeaf?e._e():a("span",[e._v(" ("+e._s(i.children.length)+") ")])]}}]),model:{value:e.areaValue,callback:function(t){e.areaValue=t},expression:"areaValue"}})],1),a("el-col",{attrs:{md:10}},[a("el-input",{staticClass:" mr10",attrs:{clearable:"",placeholder:"输入用户姓名"},on:{clear:e.search},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.selectWord,callback:function(t){e.selectWord=t},expression:"selectWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"},[e._v("搜索")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"row-key":e.getRowKeys,height:e.tableHeight,align:"center"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0,align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"IMEI",label:"IMEI",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"userName",label:"用户名",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"address",label:"家庭地址",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"telphone",label:"联系电话",align:"center","show-overflow-tooltip":""}})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:e.totalCount},on:{"current-change":e.handleCurrentChange}})],1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.comfirm()}}},[e._v("添 加")])],1)])],1)},u=[],d={name:"device-add-dialog",data:function(){return{visible:this.show,groupId:"",tableData:[],pageSize:10,pageNum:1,totalCount:0,loading:!1,selectWord:"",multipleSelection:[],areaOptions:[],areaValue:""}},computed:{tableHeight:function(){return window.innerHeight-365<350?window.innerHeight-365+"px":"350px"}},props:{show:{type:Boolean,default:!1},EDIT:{type:String},datas:{type:Object},updataTable:{type:Function,default:null}},watch:{show:function(){var e=this;this.$nextTick(function(){void 0!==e.datas&&e.datas!=={}&&e.visible&&(e.groupId=e.datas.id,e.getData(!0))}),this.visible=this.show,this.visible&&(this.getData(),this.getAreaOptionsData())}},created:function(){},methods:{comfirm:function(){this.visible=!1},search:function(e){this.getData(!1)},handleSelectionChange:function(e){this.multipleSelection=e},handleCurrentChange:function(e){this.pageNum=e,this.getData(!1)},getData:function(e){var t=this;e&&(this.selectWord="",this.pageNum=1);var a={orgId:this.areaValue.length>0?this.areaValue[this.areaValue.length-1]:"",groupId:this.groupId,keyword:this.selectWord,pageSize:this.pageSize,pageNum:this.pageNum};this.loading=!0,this.$api.broadcastGroup.getGroupDeviceAddListByID(a).then(function(e){t.totalCount=e.total,t.tableData=e.list,t.loading=!1}).catch(function(e){t.loading=!1})},getAreaOptionsData:function(){var e=this;this.$api.getAreaOptions().then(function(t){e.areaOptions=t.list})},areaChange:function(e){this.getData(!0)},getRowKeys:function(e){return e.id},closeDialog:function(){this.selectWord="",this.pageNum=1,this.$refs.multipleTable.clearSelection(),this.$emit("update:show",!1)}}},p=d,h=a("2877"),g=Object(h["a"])(p,c,u,!1,null,null,null),f=g.exports,m={name:"device-list-dialog",components:{deviceAddDialog:f},data:function(){return{visible:this.show,groupId:"",tableData:[],pageSize:10,pageNum:1,totalCount:0,loading:!1,selectWord:"",multipleSelection:[],deviceAddDialog:{visible:!1,title:"",edit:!1,data:{}},areaOptions:[],areaValue:""}},computed:{tableHeight:function(){return window.innerHeight-365>350?"350px":window.innerHeight-365+"px"}},props:{show:{type:Boolean,default:!1},EDIT:{type:String},datas:{type:Object},updataTable:{type:Function,default:null}},watch:{show:function(){var e=this;this.$nextTick(function(){void 0!==e.datas&&e.datas!=={}&&e.visible&&(e.groupId=e.datas.id,e.getData(!0))}),this.visible=this.show,this.visible&&this.getAreaOptionsData()}},created:function(){},methods:{comfirm:function(){this.visible=!1},handleSelectionChange:function(e){this.multipleSelection=e},getAreaOptionsData:function(){var e=this;this.$api.getAreaOptions().then(function(t){e.areaOptions=t.list})},handleCurrentChange:function(e){this.pageNum=e,this.getData(!1)},getData:function(e){var t=this;e&&(this.selectWord="",this.pageNum=1);var a={groupId:this.groupId,orgId:this.areaValue.length>0?this.areaValue[this.areaValue.length-1]:"",keyword:this.selectWord,pageSize:this.pageSize,pageNum:this.pageNum};this.loading=!0,this.$api.broadcastGroup.getGroupDeviceListByID(a).then(function(e){t.totalCount=e.total,t.tableData=e.list,t.loading=!1}).catch(function(e){t.loading=!1})},handleDelete:function(e,t){var a=this;this.$confirm("此操作将移除选中的设备, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$message({type:"success",message:"删除成功!"})}).catch(function(){})},addDevice:function(){this.deviceAddDialog={visible:!0,title:"",edit:!1,data:{id:this.groupId}}},areaChange:function(e){this.getData(!0)},search:function(){this.getData(!1)},getRowKeys:function(e){return e.id},closeDialog:function(){this.selectWord="",this.pageNum=1,this.$refs.multipleTable.clearSelection(),this.$emit("update:show",!1)}}},b=m,v=Object(h["a"])(b,s,r,!1,null,null,null),w=v.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.visible},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.closeDialog()}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules,"show-message":!1}},[a("el-form-item",{attrs:{label:"分组名称:",prop:"groupName"}},[a("el-input",{attrs:{maxlength:"20","show-word-limit":"",placeholder:"输入20个字符长度以内的名称"},model:{value:e.form.groupName,callback:function(t){e.$set(e.form,"groupName",t)},expression:"form.groupName"}})],1),a("el-form-item",{attrs:{label:"所属机构:",prop:"areaValue"}},[a("el-cascader",{attrs:{options:e.areaOptions,"show-all-levels":!1,clearable:"",filterable:"",placeholder:"搜索或选择机构"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.node,i=t.data;return[a("span",[e._v(e._s(i.label))]),l.isLeaf?e._e():a("span",[e._v(" ("+e._s(i.children.length)+") ")])]}}]),model:{value:e.form.areaValue,callback:function(t){e.$set(e.form,"areaValue",t)},expression:"form.areaValue"}})],1),a("el-form-item",{attrs:{label:"音量设置:",prop:"voiceLevelValue"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.voiceLevelValue,callback:function(t){e.$set(e.form,"voiceLevelValue",t)},expression:"form.voiceLevelValue"}},e._l(e.voiceLevelOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"防移开关:",prop:"moveSwitch"}},[a("el-switch",{model:{value:e.form.moveSwitch,callback:function(t){e.$set(e.form,"moveSwitch",t)},expression:"form.moveSwitch"}})],1),a("el-form-item",{attrs:{label:"通话开关:",prop:"callSwitch"}},[a("el-switch",{model:{value:e.form.callSwitch,callback:function(t){e.$set(e.form,"callSwitch",t)},expression:"form.callSwitch"}})],1),a("el-form-item",{attrs:{label:"报警模式:",prop:"alarmValue"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.alarmValue,callback:function(t){e.$set(e.form,"alarmValue",t)},expression:"form.alarmValue"}},e._l(e.alarmOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.comfirm()}}},[e._v("确 定")])],1)],1)],1)},y=[],C={name:"edit-group-dialog",data:function(){return{visible:this.show,edit:!1,dialogTitle:this.title,form:{groupId:"",groupName:"",alarmValue:"",areaValue:"",voiceLevelValue:"",callSwitch:!0,moveSwitch:!0},groupOrgValue:[],areaOptions:[],voiceLevelOptions:[],alarmOptions:[],rules:{groupName:[{required:!0}],areaValue:[{required:!0}],voiceLevelValue:[{required:!0}],alarmValue:[{required:!0}],callSwitch:[{required:!0}],moveSwitch:[{required:!0}]}}},props:{show:{type:Boolean,default:!1},EDIT:{type:Boolean},datas:{type:Object},title:{type:String,default:""},updataTable:{type:Function,default:null}},watch:{show:function(){var e=this;this.$nextTick(function(){void 0!==e.datas&&e.datas!=={}&&e.visible&&(e.form={groupId:e.datas.id,groupName:e.datas.groupName,alarmValue:e.datas.alarmMode,areaValue:e.datas.orgId+"",voiceLevelValue:e.datas.volume,callSwitch:"0"===e.datas.voiceSwitch,moveSwitch:"0"===e.datas.moveSwitch})}),this.edit=this.EDIT,this.dialogTitle=this.title,this.visible=this.show,this.visible&&(this.getVoiceOptionsData(),this.getAreaOptionsData(),this.getAlarmOptionsData())}},created:function(){},methods:{comfirm:function(){var e=this;if(!this.checkForm()){var t={groupName:this.form.groupName,orgId:this.form.areaValue.length>0?this.form.areaValue[this.form.areaValue.length-1]:"",volume:this.form.voiceLevelValue,moveSwitch:!0===this.form.moveSwitch?"0":"1",voiceSwitch:!0===this.form.callSwitch?"0":"1",alarmMode:this.form.alarmValue};this.edit?(t.id=this.form.groupId,this.$api.broadcastGroup.updateGroup(t).then(function(t){e.visible=!1,e.$message.success("更新成功"),e.updataTable(!0)}).catch(function(t){e.$message.error("更新失败，请重试")})):this.$api.broadcastGroup.addGroup(t).then(function(t){e.visible=!1,e.$message.success("添加成功"),e.updataTable(!0)}).catch(function(t){e.$message.error("添加失败，请重试")})}},getVoiceOptionsData:function(){var e=this;this.$api.getVoiceLevelOptions().then(function(t){e.voiceLevelOptions=t.list})},getAreaOptionsData:function(){var e=this;this.$api.getAreaOptions().then(function(t){e.areaOptions=t.list})},getAlarmOptionsData:function(){var e=this;this.$api.getAlarmOptions().then(function(t){e.alarmOptions=t.list})},closeDialog:function(){this.form={groupId:"",groupName:"",alarmValue:"",areaValue:"",voiceLevelValue:"",callSwitch:!0,moveSwitch:!0},this.$refs["form"].resetFields(),this.$emit("update:show",!1)},checkForm:function(){return""===this.form.groupName?(this.$message.error("请填写分组名称"),!0):""===this.form.alarmValue?(this.$message.error("请选择报警模式"),!0):""===this.form.areaValue?(this.$message.error("请选择所属机构"),!0):""===this.form.voiceLevelValue&&(this.$message.error("请选择音量"),!0)}}},k=C,S=Object(h["a"])(k,D,y,!1,null,null,null),x=S.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"节目单详情",visible:e.visible,width:"70%"},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.$emit("update:show",!1)}}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"调配节目单",name:"fm"}},[a("div",{staticClass:"table"},[a("div",{staticClass:"container-tab"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.fmLoading,expression:"fmLoading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.fmTableData,height:e.tableHeight,align:"center"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"channelName",label:"频道名字",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"frequency",label:"频道频率",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"playTime",label:"播报时间",align:"center","show-overflow-tooltip":""}})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:30},on:{"current-change":e.handleCurrentChange}})],1)],1)])]),a("el-tab-pane",{attrs:{label:"音频节目单",name:"audio"}},[a("div",{staticClass:"table"},[a("div",{staticClass:"container-tab"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.aduioLoading,expression:"aduioLoading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.audioTableData,height:e.tableHeight,align:"center"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"audioName",label:"音频名字",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"audioOldName",label:"音频原名字",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"audioUrl",label:"音频路径",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"audioSize",label:"文件大小",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"audioMin",label:"音频长度",align:"center","show-overflow-tooltip":""}})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:30},on:{"current-change":e.handleCurrentChange}})],1)],1)])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.comfirm()}}},[e._v("确 定")])],1)],1)},$=[],V={name:"group-playbills-dialog",data:function(){return{visible:this.show,groupId:"",activeName:"fm",fmLoading:!1,fmTableData:[],fmPageSize:10,fmPageNum:1,fmTotalCount:0,aduioLoading:!1,audioTableData:[],audioPageSize:10,audioPageNum:1,audioTotalCount:0}},computed:{tableHeight:function(){return window.innerHeight-377>350?"350px":window.innerHeight-377+"px"}},props:{show:{type:Boolean,default:!1},EDIT:{type:String},datas:{type:Object}},watch:{show:function(){var e=this;this.$nextTick(function(){void 0!==e.datas&&e.datas!=={}&&e.visible&&(e.groupId=e.datas.id,e.getFMData(),e.getAudioData())}),this.visible=this.show,this.visible=this.show}},created:function(){},methods:{comfirm:function(){this.visible=!1},handleSelectionChange:function(e){this.multipleSelection=e},handleCurrentChange:function(e){this.cur_page=e,this.getData()},getFMData:function(){var e=this,t={groupId:this.groupId,pageSize:this.fmPageSize,pageNum:this.fmPageNum};this.fmLoading=!0,this.$api.broadcastGroup.getGroupFmListByID(t).then(function(t){e.fmTotalCount=t.total,e.fmTableData=t.list,e.fmLoading=!1}).catch(function(t){e.fmLoading=!1})},getAudioData:function(){var e=this,t={groupId:this.groupId,pageSize:this.audioPageSize,pageNum:this.audioPageNum};this.aduioLoading=!0,this.$api.broadcastGroup.getGroupAudioListByID(t).then(function(t){e.audioTotalCount=t.total,e.audioTableData=t.list,e.aduioLoading=!1}).catch(function(t){e.aduioLoading=!1})}}},O=V,N=Object(h["a"])(O,_,$,!1,null,null,null),T=N.exports,L={name:"basetable",components:{deviceListDialog:w,editGroupDialog:x,groupPlaybillsDialog:T},data:function(){return{tableData:[],loading:!1,pageSize:10,pageNum:1,totalCount:0,selectWord:"",multipleSelection:[],playbillDetailDialog:{visible:!1,title:"",edit:!1,data:{}},deviceListDialog:{visible:!1,title:"",edit:!1,data:{}},groupPlaybillsDialog:{visible:!1,title:"",edit:!1,data:{}},areaOptions:[],areaValue:""}},created:function(){this.getData(!1),this.getAreaOptionsData()},computed:{tableHeight:function(){return window.innerHeight-272+"px"}},methods:{handleCurrentChange:function(e){this.pageSize=e,this.getData(!1)},getData:function(e){var t=this;e&&(this.selectWord="",this.pageNum=1);var a={orgId:this.areaValue.length>0?this.areaValue[this.areaValue.length-1]:"",keyword:this.selectWord,pageSize:this.pageSize,pageNum:this.pageNum};this.loading=!0,this.$api.broadcastGroup.getGroupList(a).then(function(e){t.totalCount=e.total,t.tableData=e.list,t.loading=!1}).catch(function(e){t.loading=!1})},getAreaOptionsData:function(){var e=this;this.$api.getAreaOptions().then(function(t){e.areaOptions=t.list})},handleSelectionChange:function(e){this.multipleSelection=e},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该分组, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e="";if(t)e=t.id;else for(var l=0;l<a.multipleSelection.length;l++){var i=a.multipleSelection[l];e=e+i.id+","}a.deleteGroup(e)}).catch(function(){})},deleteGroup:function(e){var t=this;console.log(e);var a={id:e};this.$api.broadcastGroup.deleteGroup(a).then(function(e){t.$refs.multipleTable.clearSelection(),1===t.tableData.length&&1!==t.pageNum&&t.pageNum--,t.$message.success("删除成功"),t.getData(!1)}).catch(function(e){t.$message.error("删除失败，请重试")})},search:function(e){this.getData(!1)},areaChange:function(e){this.getData(!0)},addGroup:function(){this.playbillDetailDialog={visible:!0,title:"添加分组",edit:!1,data:void 0}},editGroup:function(e,t,a){this.playbillDetailDialog={visible:!0,title:"编辑分组",edit:!0,data:a}},openDeviceListDetail:function(){this.deviceListDialog={visible:!0,title:"",edit:!1,data:this.multipleSelection[0]}},openGroupPlaybills:function(){this.groupPlaybillsDialog={visible:!0,title:"",edit:!1,data:this.multipleSelection[0]}},getRowKeys:function(e){return e.id}}},I=L,G=Object(h["a"])(I,o,n,!1,null,null,null),E=G.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"container-tab"},[a("el-row",{staticClass:"handle-box",attrs:{gutter:10}},[a("el-col",{attrs:{md:10}},[a("el-input",{staticClass:" mr10",attrs:{"show-all-levels":!1,placeholder:"输入十户联防名字/用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.selectWord,callback:function(t){e.selectWord=t},expression:"selectWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"},[e._v("搜索")])],1)],1),a("el-col",{attrs:{md:14}},[a("el-button",{staticClass:"r",staticStyle:{"margin-left":"10px"},attrs:{type:"danger",disabled:0==e.multipleSelection.length},on:{click:function(t){return e.handleDelete()}}},[a("i",{staticClass:"el-icon-delete el-icon--left"}),e._v("删除")]),a("el-button",{staticClass:"r",attrs:{type:"success"},on:{click:function(t){return e.editGroup("添加十户联防小组")}}},[a("i",{staticClass:"el-icon-plus el-icon--left"}),e._v("添加")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,height:e.tableHeight,align:"center"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"tenname",label:"十户联防名称",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.editGroup("编辑十户联防小组")}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:30},on:{"current-change":e.handleCurrentChange}})],1)],1),a("defence-group-dialog",{attrs:{title:e.defenceDialogTitle,show:e.defenceDialogVisible},on:{"update:show":function(t){e.defenceDialogVisible=t}}})],1)},B=[],W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.visible},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.closeDialog()}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px","show-message":!1}},[a("el-form-item",{attrs:{label:"联防小组名称",prop:"groupName"}},[a("el-input",{attrs:{maxlength:"20","show-word-limit":"",placeholder:"输入20个字符长度以内的名称"},model:{value:e.form.groupName,callback:function(t){e.$set(e.form,"groupName",t)},expression:"form.groupName"}})],1),a("el-form-item",{attrs:{label:"成员区域",prop:"areaValue"}},[a("el-cascader",{attrs:{options:e.areaOptions},model:{value:e.form.areaValue,callback:function(t){e.$set(e.form,"areaValue",t)},expression:"form.areaValue"}})],1),a("el-form-item",{attrs:{label:"已添加成员"}},[a("el-input",{attrs:{placeholder:"",readonly:""},model:{value:e.form.menbers,callback:function(t){e.$set(e.form,"menbers",t)},expression:"form.menbers"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-edit"},on:{click:function(t){return e.openMenberEdit()}},slot:"append"})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.comfirm()}}},[e._v("确 定")])],1)],1),a("defence-menber-dialog",{attrs:{show:e.menberDialogVisible},on:{"update:show":function(t){e.menberDialogVisible=t}}})],1)},j=[],H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:"编辑联防成员",visible:e.visible,width:"600px"},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.$emit("update:show",!1)}}},[a("el-transfer",{staticStyle:{"text-align":"left",display:"inline-block","margin-bottom":"12px"},attrs:{filterable:"","left-default-checked":[],"right-default-checked":[],"render-content":e.renderFunc,titles:["末添加","已添加"],"button-texts":["移除","添加"],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},data:e.data},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.comfirm()}}},[e._v("确 定")])],1)],1)],1)},z=[],P={name:"defence-menber-dialog",data:function(){this.$createElement;var e=function(e){for(var t=[],a=1;a<=15;a++)t.push({key:a,label:"备选项 ".concat(a)});return t};return{visible:this.show,data:e(),value:[1],value4:[1],renderFunc:function(e,t){return e("span",[t.key," - ",t.label])}}},props:{show:{type:Boolean,default:!1},EDIT:{type:String},datas:{type:Object}},watch:{show:function(){console.log(this.datas),this.form=this.datas,this.visible=this.show}},created:function(){},methods:{comfirm:function(){this.visible=!1},handleChange:function(e,t,a){console.log(e,t,a)}}},M=P,F=Object(h["a"])(M,H,z,!1,null,null,null),q=F.exports,K={name:"defence-group-dialog",components:{defenceMenberDialog:q},data:function(){return{visible:this.show,dialogTitle:this.title,form:{groupName:"",areaValue:"",menbers:""},areaOptions:[],menberDialogVisible:!1,rules:{groupName:[{required:!0}],areaValue:[{required:!0}]}}},props:{show:{type:Boolean,default:!1},EDIT:{type:String},datas:{type:Object},title:{type:String,default:""}},watch:{show:function(){var e=this;console.log(this.datas),void 0!==this.datas&&this.datas!=={}&&this.$nextTick(function(){e.form=e.datas}),this.dialogTitle=this.title,this.visible=this.show,this.visible&&this.getAreaOptionsData()}},created:function(){},methods:{comfirm:function(){this.visible=!1},getAreaOptionsData:function(){var e=this;this.$api.getAreaOptions().then(function(t){e.areaOptions=t.list})},openMenberEdit:function(){""!==this.form.areaValue?this.menberDialogVisible=!0:this.$message.error("请先选择成员区域")},closeDialog:function(){this.form={groupName:"",areaValue:"",menbers:""},this.$refs["form"].resetFields(),this.$emit("update:show",!1)}}},R=K,U=Object(h["a"])(R,W,j,!1,null,null,null),J=U.exports,Q={name:"basetable",components:{defenceGroupDialog:J},data:function(){return{url:"./mock-data/defence-manager.json",tableData:[],loading:!1,selectWord:"",cur_page:1,multipleSelection:[],form:{name:"",date:"",address:""},idx:-1,defenceDialogVisible:!1,defenceDialogTitle:"",fileList:[],uploadBtnLoading:!1,uploadBtnLabel:"导入"}},created:function(){this.getData()},computed:{tableHeight:function(){return window.innerHeight-272+"px"}},methods:{handleCurrentChange:function(e){this.cur_page=e,this.getData()},getData:function(){var e=this;this.loading=!0,this.$api.broadcastGroup.getDefenceGroupList().then(function(t){e.tableData=t.list,e.loading=!1}).catch(function(t){e.loading=!1})},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该联防分组, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$message({type:"success",message:"删除成功!"})}).catch(function(){})},handleSelectionChange:function(e){this.multipleSelection=e},editGroup:function(e){this.defenceDialogTitle=e,this.defenceDialogVisible=!0},search:function(e){this.getData()},handleBeforeUpload:function(){this.$message("文件正在上传..."),this.uploadBtnLabel="上传中",this.uploadBtnLoading=!0},handleUploadSuccess:function(){this.$message.success("上传成功"),this.uploadBtnLabel="导入",this.uploadBtnLoading=!1,this.fileList=[]},handleUploadErroe:function(){this.$message.error("上传失败，请重试!"),this.uploadBtnLabel="导入",this.uploadBtnLoading=!1,this.fileList=[]}}},X=Q,Y=Object(h["a"])(X,A,B,!1,null,null,null),Z=Y.exports,ee={name:"tabs",data:function(){return{activeName:"group"}},components:{groupManager:E,defenceManager:Z},methods:{},computed:{}},te=ee,ae=Object(h["a"])(te,l,i,!1,null,null,null);t["default"]=ae.exports}}]);