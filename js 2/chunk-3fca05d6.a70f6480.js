(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fca05d6"],{"672c":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("div",{staticClass:"container"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"频道管理",name:"channel"}},[a("broadcast-channel-manager")],1),a("el-tab-pane",{attrs:{label:"节目单管理",lazy:!0,name:"playbill"}},[a("broadcast-playbill-manager")],1)],1)],1)])},i=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"container-tab"},[a("el-row",{staticClass:"handle-box",attrs:{gutter:10}},[a("el-col",{attrs:{md:10}},[a("el-input",{staticClass:" mr10",attrs:{clearable:"",placeholder:"输入频道名字/频率/ID"},on:{clear:function(t){return e.updataTable(!0)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.selectWord,callback:function(t){e.selectWord=t},expression:"selectWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"},[e._v("搜索")])],1)],1),a("el-col",{attrs:{md:14}},[a("el-button",{staticClass:"r",staticStyle:{"margin-left":"10px"},attrs:{type:"danger",disabled:0==e.multipleSelection.length},on:{click:function(t){return e.handleDelete()}}},[a("i",{staticClass:"el-icon-delete el-icon--left"}),e._v("删除")]),a("el-button",{staticClass:"r",attrs:{type:"primary"},on:{click:function(t){return e.getData()}}},[a("i",{staticClass:"el-icon-refresh el-icon--left"}),e._v("刷新")]),a("el-button",{staticClass:"r",attrs:{type:"success"},on:{click:function(t){return e.addChannel()}}},[a("i",{staticClass:"el-icon-plus el-icon--left"}),e._v("添加")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"row-key":e.getRowKeys,height:e.tableHeight,align:"center"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"channelName",label:"频道名字",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"frequency",label:"频道频率",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleDetail(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:e.totalCount},on:{"current-change":e.handleCurrentChange}})],1)],1),a("broadcast-add-dialog",{attrs:{updataTable:e.updataTable,EDIT:e.broadcastAddDialog.edit,datas:e.broadcastAddDialog.data,title:e.broadcastAddDialog.title,show:e.broadcastAddDialog.visible},on:{"update:show":function(t){return e.$set(e.broadcastAddDialog,"visible",t)}}})],1)},o=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.visible},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.closeDialog()}}},[a("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules,"show-message":!1}},[a("el-form-item",{attrs:{label:"频道名字",prop:"channelName"}},[a("el-input",{attrs:{maxlength:"10","show-word-limit":"",placeholder:"输入10个字符长度以内的名称"},model:{value:e.form.channelName,callback:function(t){e.$set(e.form,"channelName",t)},expression:"form.channelName"}})],1),a("el-form-item",{attrs:{label:"频道频率",prop:"channel"}},[a("el-input",{model:{value:e.form.channel,callback:function(t){e.$set(e.form,"channel",t)},expression:"form.channel"}},[a("template",{slot:"append"},[e._v("MHz")])],2)],1),a("el-form-item",{attrs:{label:"频道备注",prop:"channelRemark"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:10},placeholder:"输入100个字符以内的备注",maxlength:"100","show-word-limit":""},model:{value:e.form.channelRemark,callback:function(t){e.$set(e.form,"channelRemark",t)},expression:"form.channelRemark"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.comfirm()}}},[e._v("确 定")])],1)],1)],1)},s=[],c=(a("3022"),{name:"broadcast-add-dialog",data:function(){return{visible:this.show,edit:this.EDIT,dialogTitle:this.title,form:{channelId:"",channelName:"",channel:"",channelRemark:""},rules:{channelName:[{required:!0}],channel:[{required:!0}],channelRemark:[{required:!0}]}}},props:{show:{type:Boolean,default:!1},EDIT:{type:Boolean},datas:{type:Object},title:{type:String,default:""},updataTable:{type:Function,default:null}},watch:{show:function(){var e=this;this.$nextTick(function(){void 0!==e.datas&&e.datas!=={}&&e.visible&&(e.form.channelId=e.datas.id,e.form.channelName=e.datas.channelName,e.form.channel=e.datas.frequency,e.form.channelRemark=e.datas.remark)}),this.edit=this.EDIT,this.dialogTitle=this.title,this.visible=this.show}},created:function(){},methods:{comfirm:function(){var e=this;if(!this.checkForm()){var t={channelName:this.form.channelName,frequency:this.form.channel,remark:this.form.channelRemark};this.edit?(t.id=this.form.channelId,this.$api.broadcastManager.updateBroadcastManagerChannel(t).then(function(t){e.visible=!1,e.$message.success("更新成功"),e.updataTable(!0)}).catch(function(t){e.$message.error("更新失败，请重试")})):this.$api.broadcastManager.addBroadcastManagerChannel(t).then(function(t){e.visible=!1,e.$message.success("添加成功"),e.updataTable(!0)}).catch(function(t){e.$message.error("添加失败，请重试")})}},closeDialog:function(){this.cleanForm(),this.$emit("update:show",!1)},cleanForm:function(){this.form={channelId:"",channelName:"",channel:"",channelRemark:""},this.$refs["form"].resetFields()},checkForm:function(){return""===this.form.channelName?(this.$message.error("请填写频道名称"),!0):""===this.form.channel?(this.$message.error("请填写频道"),!0):""===this.form.channelRemark&&(this.$message.error("请填写频道备注"),!0)}}}),d=c,u=a("2877"),h=Object(u["a"])(d,r,s,!1,null,null,null),p=h.exports,m={name:"broadcast-channel-manager",components:{broadcastAddDialog:p},data:function(){return{url:"./mock-data/broadcast-channel-manager.json",tableData:[],pageSize:10,pageNum:1,totalCount:0,loading:!1,multipleSelection:[],selectWord:"",form:{name:"",date:"",address:""},broadcastAddDialog:{visible:!1,title:"",edit:!1,data:{}},broadcastAddDialogVisible:!1,broadcastAddTitle:""}},created:function(){this.getData()},computed:{tableHeight:function(){return window.innerHeight-272+"px"}},methods:{handleCurrentChange:function(e){this.pageNum=e,this.getData()},getData:function(){var e=this,t={keyword:this.selectWord,pageSize:this.pageSize,pageNum:this.pageNum};this.loading=!0,this.$api.broadcastManager.getBroadcastManagerChannelList(t).then(function(t){e.totalCount=t.total,e.tableData=t.list,e.loading=!1}).catch(function(t){e.loading=!1})},updataTable:function(e){e&&(this.selectWord="",this.pageNum=1),this.getData()},search:function(){this.pageNum=1,this.getData()},handleDetail:function(e,t){this.broadcastAddDialog={visible:!0,title:"编辑频道",edit:!0,data:t}},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除选中的频道, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e="";if(t)e=t.id;else for(var l=0;l<a.multipleSelection.length;l++){var i=a.multipleSelection[l];e=e+i.id+","}a.deleteChannel(e)}).catch(function(){})},deleteChannel:function(e){var t=this,a={id:e};this.$api.broadcastManager.deleteBroadcastManagerChannel(a).then(function(e){t.$refs.multipleTable.clearSelection(),1===t.tableData.length&&1!==t.pageNum&&t.pageNum--,t.$message.success("删除成功"),t.getData()}).catch(function(e){t.$message.error("删除失败，请重试")})},getRowKeys:function(e){return e.id},handleSelectionChange:function(e){this.multipleSelection=e},addChannel:function(){this.broadcastAddDialog={visible:!0,title:"添加频道",edit:!1,data:void 0}}}},f=m,b=Object(u["a"])(f,n,o,!1,null,"3bf46781",null),g=b.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"container-tab"},[a("el-row",{staticClass:"handle-box",attrs:{gutter:10}},[a("el-col",{attrs:{md:10}},[a("el-input",{staticClass:"mr10",attrs:{clearable:"",placeholder:"输入节目单名字/ID"},on:{clear:function(t){return e.updataTable(!0)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.selectWord,callback:function(t){e.selectWord=t},expression:"selectWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"},[e._v("搜索")])],1)],1),a("el-col",{attrs:{md:14}},[a("el-button",{staticClass:"r",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.openDirectDialog()}}},[a("i",{staticClass:"el-icon-document el-icon--left"}),e._v("操作指引")]),a("el-button",{staticClass:"r",attrs:{type:"danger",disabled:0==e.multipleSelection.length},on:{click:function(t){return e.handleDelete()}}},[a("i",{staticClass:"el-icon-delete el-icon--left"}),e._v("删除")]),a("el-button",{staticClass:"r",attrs:{type:"primary"},on:{click:function(t){return e.getData()}}},[a("i",{staticClass:"el-icon-refresh el-icon--left"}),e._v("刷新")]),a("el-button",{staticClass:"r",attrs:{type:"success"},on:{click:function(t){return e.addPlaybill()}}},[a("i",{staticClass:"el-icon-plus el-icon--left"}),e._v("添加")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"row-key":e.getRowKeys,height:e.tableHeight,align:"center"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"programName",label:"节目单名字",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"programDetail",label:"节目明细",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"beginTime",label:"开始时间",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"round",label:"播放周期",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.playCycle?a("p",[e._v("单次")]):e._e(),"1"===t.row.playCycle?a("p",[e._v("每天")]):e._e(),"2"===t.row.playCycle?a("p",[e._v("自定义")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"volume",label:"音量",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"280",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑节目单")]),a("el-button",{attrs:{type:"text",icon:"el-icon-files"},on:{click:function(a){return e.handleConfig(t.$index,t.row)}}},[e._v("配置下发对象")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:e.totalCount},on:{"current-change":e.handleCurrentChange}})],1)],1),a("playbill-add-dialog",{attrs:{updataTable:e.updataTable,EDIT:e.playbillAddDialog.edit,datas:e.playbillAddDialog.data,title:e.playbillAddDialog.title,show:e.playbillAddDialog.visible},on:{"update:show":function(t){return e.$set(e.playbillAddDialog,"visible",t)}}}),a("playbill-add-direct-dialog",{attrs:{show:e.playbillDirectDialog.visible},on:{"update:show":function(t){return e.$set(e.playbillDirectDialog,"visible",t)}}}),a("playbill-config-dialog",{attrs:{EDIT:e.playbillConfigDialog.edit,datas:e.playbillConfigDialog.data,title:e.playbillConfigDialog.title,show:e.playbillConfigDialog.visible},on:{"update:show":function(t){return e.$set(e.playbillConfigDialog,"visible",t)}}})],1)},y=[],D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.visible,width:"75%"},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.closeDialog()}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"form",staticClass:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules,"show-message":!1}},[a("el-form-item",{attrs:{label:"节目单名字",prop:"playbillName"}},[a("el-input",{attrs:{maxlength:"10","show-word-limit":"",placeholder:"输入10个字符长度以内的名称"},model:{value:e.form.playbillName,callback:function(t){e.$set(e.form,"playbillName",t)},expression:"form.playbillName"}})],1),a("el-form-item",{attrs:{label:"频道",prop:"channelValue"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.channelValue,callback:function(t){e.$set(e.form,"channelValue",t)},expression:"form.channelValue"}},e._l(e.channelOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"前导音",prop:"guideAudioValue"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.guideAudioValue,callback:function(t){e.$set(e.form,"guideAudioValue",t)},expression:"form.guideAudioValue"}},e._l(e.guideAudioOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"音量设置",prop:"voiceLevelValue"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.voiceLevelValue,callback:function(t){e.$set(e.form,"voiceLevelValue",t)},expression:"form.voiceLevelValue"}},e._l(e.voiceLevelOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"时间范围",prop:"playbillTimeValue"}},[a("el-time-picker",{attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:e.form.playbillTimeValue,callback:function(t){e.$set(e.form,"playbillTimeValue",t)},expression:"form.playbillTimeValue"}})],1),a("el-form-item",{attrs:{label:"播放周期",prop:"radio"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.radio,callback:function(t){e.$set(e.form,"radio",t)},expression:"form.radio"}},[e._v("单次")]),a("el-radio",{attrs:{label:"1"},model:{value:e.form.radio,callback:function(t){e.$set(e.form,"radio",t)},expression:"form.radio"}},[e._v("每次")]),a("el-radio",{attrs:{label:"2"},model:{value:e.form.radio,callback:function(t){e.$set(e.form,"radio",t)},expression:"form.radio"}},[e._v("自定义")])],1),a("transition",{attrs:{name:"el-fade-in-linear"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"===e.form.radio,expression:"form.radio === '2'"}],attrs:{label:"自定义",prop:"checkList"}},[a("el-checkbox-group",{model:{value:e.form.checkList,callback:function(t){e.$set(e.form,"checkList",t)},expression:"form.checkList"}},[a("el-checkbox",{attrs:{label:"周一"}}),a("el-checkbox",{attrs:{label:"周二"}}),a("el-checkbox",{attrs:{label:"周三"}}),a("el-checkbox",{attrs:{label:"周四"}}),a("el-checkbox",{attrs:{label:"周五"}}),a("el-checkbox",{attrs:{label:"周六"}}),a("el-checkbox",{attrs:{label:"周日"}})],1)],1)],1),a("transition",{attrs:{name:"el-fade-in-linear"}},[a("el-form-item",{attrs:{label:"日期范围",prop:"playbillDateValue"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.form.playbillDateValue,callback:function(t){e.$set(e.form,"playbillDateValue",t)},expression:"form.playbillDateValue"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.comfirm()}}},[e._v("确 定")])],1)],1)],1)},w=[],k={name:"device-detail-dialog",components:{},computed:{},data:function(){return{visible:this.show,edit:this.EDIT,dialogTitle:this.title,dialogLoading:!1,form:{playbillId:"",playbillName:"",channelValue:"",guideAudioValue:"",voiceLevelValue:"",playbillTimeValue:"",radio:"2",checkList:["周一"],playbillDateValue:""},channelOptions:[],guideAudioOptions:[],voiceLevelOptions:[],rules:{playbillName:[{required:!0}],channelValue:[{required:!0}],guideAudioValue:[{required:!0}],voiceLevelValue:[{required:!0}],playbillTimeValue:[{required:!0}],radio:[{required:!0}],checkList:[{required:!0}],playbillDateValue:[{required:!0}]}}},props:{show:{type:Boolean,default:!1},EDIT:{type:Boolean},datas:{type:Object},title:{type:String,default:""},updataTable:{type:Function,default:null}},watch:{show:function(){var e=this;this.$nextTick(function(){void 0!==e.datas&&e.datas!=={}&&e.visible&&(e.form.playbillId=e.datas.id,e.getPlaybillDetail())}),this.edit=this.EDIT,this.dialogTitle=this.title,this.visible=this.show,this.visible&&(this.getVoiceOptionsData(),this.getChannleOptionsData(),this.getGuideAudioOptionsData())}},created:function(){},methods:{comfirm:function(){var e=this;if(!this.checkForm()){var t={channelId:this.form.channelValue,audioId:this.form.guideAudioValue,volume:this.form.voiceLevelValue,programName:this.form.playbillName,programType:"0",beginTime:this.$dateUtils.getTimeStrValue(this.form.playbillTimeValue[0]),endTime:this.$dateUtils.getTimeStrValue(this.form.playbillTimeValue[1]),definedBeginTime:this.$dateUtils.getDateStrValue(this.form.playbillDateValue[0]),definedEndTime:this.$dateUtils.getDateStrValue(this.form.playbillDateValue[1]),definedPlayWeek:this.$dateUtils.getDefinedPlayWeekStrValue(this.form.checkList),playCycle:this.form.radio,hasLeading:"0"};this.edit?(t.id=this.form.playbillId,this.$api.broadcastManager.updateBroadcastManagerPlaybill(t).then(function(t){e.visible=!1,e.$message.success("更新成功"),e.updataTable(!0)}).catch(function(t){e.$message.error("更新失败，请重试")})):this.$api.broadcastManager.addBroadcastManagerPlaybill(t).then(function(t){e.visible=!1,e.$message.success("添加成功"),e.updataTable(!0)}).catch(function(t){e.$message.error("添加失败，请重试")})}},getPlaybillDetail:function(){var e=this;this.dialogLoading=!0;var t={id:this.form.playbillId};this.$api.broadcastManager.getBroadcastManagerPlaybillDetail(t).then(function(t){e.$nextTick(function(){e.form={playbillId:t.row.id,playbillName:t.row.programName,voiceLevelValue:t.row.volume,channelValue:t.row.channelId,guideAudioValue:t.row.audioId,playbillTimeValue:e.$dateUtils.getTimeRangeArrValue(t.row.beginTime,t.row.endTime),playbillDateValue:e.$dateUtils.getDateRangeArrValue(t.row.definedBeginTime,t.row.definedEndTime),radio:t.row.playCycle,checkList:"2"===t.row.playCycle?e.$dateUtils.getDefinedPlayWeekArrValue(e.datas.definedPlayWeek):[]},e.dialogLoading=!1})}).catch(function(t){e.dialogLoading=!1,e.$message.error("加载节目单失败，请重试")})},getVoiceOptionsData:function(){var e=this;this.$api.getVoiceLevelOptions().then(function(t){e.voiceLevelOptions=t.list})},getChannleOptionsData:function(){var e=this,t={keyword:"",pageSize:999,pageNum:1};this.$api.broadcastManager.getBroadcastManagerChannelList(t).then(function(t){for(var a=t.list,l=[],i=0;i<a.length;i++){var n=a[i],o={value:n.id,label:n.channelName+" - "+n.frequency};l.push(o)}e.channelOptions=l}).catch(function(e){})},getGuideAudioOptionsData:function(){var e=this,t={keyword:"",pageSize:999,pageNum:1};this.$api.broadcastManager.getBroadcastManagerGuideOptions(t).then(function(t){for(var a=t.list,l=[],i=0;i<a.length;i++){var n=a[i],o={value:n.id,label:n.audioName};l.push(o)}e.guideAudioOptions=l}).catch(function(e){})},closeDialog:function(){this.cleanForm(),this.$emit("update:show",!1)},cleanForm:function(){this.form={playbillId:"",playbillName:"",channelValue:"",guideAudioValue:"",voiceLevelValue:"",playbillTimeValue:"",radio:"2",checkList:["周一"],playbillDateValue:""},this.activeName="info",this.$refs["form"].resetFields()},checkForm:function(){return""===this.form.playbillName?(this.$message.error("请填写节目单名称"),!0):""===this.form.channelValue?(this.$message.error("请选择频道"),!0):""===this.form.guideAudioValue?(this.$message.error("请选择前导音"),!0):""===this.form.voiceLevelValue?(this.$message.error("请选择音量"),!0):""===this.form.playbillTimeValue?(this.$message.error("请选择时间范围"),!0):2===this.form.radio&&0===this.form.checkList.length?(this.$message.error("请选择自定义播放周期"),!0):""===this.form.playbillDateValue&&(this.$message.error("请选择日期范围"),!0)}}},C=k,$=(a("f52c"),Object(u["a"])(C,D,w,!1,null,"4b09776d",null)),x=$.exports,T=a("52f4"),V=a("1ecc"),N={name:"broadcast-playbill-manager",components:{playbillAddDialog:x,playbillAddDirectDialog:T["a"],playbillConfigDialog:V["a"]},data:function(){return{tableData:[],pageSize:10,pageNum:1,totalCount:0,loading:!1,multipleSelection:[],selectWord:"",playbillAddDialog:{visible:!1,title:"",edit:!1,data:{}},playbillDirectDialog:{visible:!1,title:"",edit:!1,data:{}},playbillConfigDialog:{visible:!1,title:"",edit:!1,data:{}}}},created:function(){this.getData()},computed:{tableHeight:function(){return window.innerHeight-272+"px"}},methods:{handleCurrentChange:function(e){this.pageNum=e,this.getData()},getData:function(){var e=this,t={keyword:this.selectWord,pageSize:this.pageSize,pageNum:this.pageNum};this.loading=!0,this.$api.broadcastManager.getBroadcastManagerPlaybillList(t).then(function(t){e.totalCount=t.total,e.tableData=t.list,e.loading=!1}).catch(function(t){e.loading=!1})},updataTable:function(e){e&&(this.selectWord="",this.pageNum=1),this.getData()},search:function(){this.pageNum=1,this.getData()},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除选中的节目单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e="";if(t)e=t.id;else for(var l=0;l<a.multipleSelection.length;l++){var i=a.multipleSelection[l];e=e+i.id+","}a.deletePlaybill(e)}).catch(function(){})},deletePlaybill:function(e){var t=this,a={id:e};this.$api.broadcastManager.deleteBroadcastManagerPlaybill(a).then(function(e){t.$refs.multipleTable.clearSelection(),1===t.tableData.length&&1!==t.pageNum&&t.pageNum--,t.$message.success("删除成功"),t.getData()}).catch(function(e){t.$message.error("删除失败，请重试")})},handleSelectionChange:function(e){this.multipleSelection=e},addPlaybill:function(){this.playbillAddDialog={visible:!0,title:"添加节目单",edit:!1,data:void 0}},handleEdit:function(e,t){this.playbillAddDialog={visible:!0,title:"编辑节目单",edit:!0,data:t}},handleConfig:function(e,t){this.playbillConfigDialog={visible:!0,title:"配置调配节目单下发对象",edit:!0,data:t}},openDirectDialog:function(){this.playbillDirectDialog={visible:!0,title:"",edit:!1,data:{}}},getRowKeys:function(e){return e.id}}},_=N,A=Object(u["a"])(_,v,y,!1,null,"584571bc",null),S=A.exports,L={name:"broadcast-manager",data:function(){return{activeName:"channel"}},components:{broadcastChannelManager:g,broadcastPlaybillManager:S},methods:{},computed:{}},O=L,I=Object(u["a"])(O,l,i,!1,null,null,null);t["default"]=I.exports},f52c:function(e,t,a){"use strict";var l=a("fa69"),i=a.n(l);i.a},fa69:function(e,t,a){}}]);