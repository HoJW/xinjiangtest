(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95aca392"],{7159:function(e,t,a){e.exports=a.p+"img/img.146655c9.jpg"},"7bde":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"container"},[a("el-row",{staticClass:"handle-box",attrs:{gutter:10}},[a("el-col",{attrs:{md:4}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"维修人员"},model:{value:e.repairMenberValue,callback:function(t){e.repairMenberValue=t},expression:"repairMenberValue"}},e._l(e.repairMenberOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-col",{attrs:{md:4}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"报修类型"},model:{value:e.repairTypeValue,callback:function(t){e.repairTypeValue=t},expression:"repairTypeValue"}},e._l(e.repairTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-col",{attrs:{md:4}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"故障类型"},model:{value:e.bugTypeValue,callback:function(t){e.bugTypeValue=t},expression:"bugTypeValue"}},e._l(e.bugTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-col",{attrs:{md:4}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"工单状态"},model:{value:e.orderTypeValue,callback:function(t){e.orderTypeValue=t},expression:"orderTypeValue"}},e._l(e.orderTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-col",{attrs:{md:6}},[a("el-input",{staticClass:" mr10",attrs:{placeholder:"IMEI"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.selectWord,callback:function(t){e.selectWord=t},expression:"selectWord"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"},[e._v("搜索")])],1)],1),a("el-col",{attrs:{md:2}},[a("el-button",{staticClass:"r",staticStyle:{"margin-left":"10px"},attrs:{type:"danger"}},[a("i",{staticClass:"el-icon-delete el-icon--left"}),e._v("删除")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,height:e.tableHeight,align:"center"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"orderId",label:"ID",width:"100",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"time",label:"报修时间",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"menber",label:"维修人员",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"imei",label:"IMEI",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"orderType",label:"报修类型",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"mistakeType",label:"故障类型",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"username",label:"用户名",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"statusLabel",label:"状态",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"!==t.row.status?a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]):e._e(),a("el-button",{attrs:{type:"text",icon:"el-icon-view"},on:{click:function(a){return e.handleDetail(t.$index,t.row)}}},[e._v("详情")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:30},on:{"current-change":e.handleCurrentChange}})],1)],1),a("order-detail-dialog",{attrs:{EDIT:e.orderDetailDialog.edit,datas:e.orderDetailDialog.data,title:e.orderDetailDialog.title,show:e.orderDetailDialog.visible},on:{"update:show":function(t){return e.$set(e.orderDetailDialog,"visible",t)}}})],1)},r=[],i=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[e.visible?l("el-dialog",{attrs:{title:e.dialogTitle,visible:e.visible,width:"60%"},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.closeDialog()}}},[l("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[l("el-tab-pane",{attrs:{label:"工单信息",name:"order"}},[l("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,rules:e.rules,"show-message":!1,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"报修类型",prop:"repairTypeValue"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.repairTypeValue,callback:function(t){e.$set(e.form,"repairTypeValue",t)},expression:"form.repairTypeValue"}},e._l(e.repairTypeOptions,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),l("el-form-item",{attrs:{label:"故障类型",prop:"bugType"}},[l("el-checkbox-group",{model:{value:e.form.bugType,callback:function(t){e.$set(e.form,"bugType",t)},expression:"form.bugType"}},[l("el-checkbox",{attrs:{label:"电量异常"}}),l("el-checkbox",{attrs:{label:"信号异常"}}),l("el-checkbox",{attrs:{label:"电压异常"}}),l("el-checkbox",{attrs:{label:"其他"}})],1)],1),l("el-form-item",{attrs:{label:"下单时间"}},[l("el-date-picker",{attrs:{readonly:"",type:"datetime",placeholder:""},model:{value:e.form.orderTime,callback:function(t){e.$set(e.form,"orderTime",t)},expression:"form.orderTime"}})],1),l("el-form-item",{attrs:{label:"上门时间",prop:"callTime"}},[l("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.form.callTime,callback:function(t){e.$set(e.form,"callTime",t)},expression:"form.callTime"}})],1),l("el-form-item",{attrs:{label:"人员安排",prop:"repairMenberValue"}},[l("el-select",{attrs:{filterable:"",clearable:"",placeholder:"维修人员"},model:{value:e.form.repairMenberValue,callback:function(t){e.$set(e.form,"repairMenberValue",t)},expression:"form.repairMenberValue"}},e._l(e.repairMenberOptions,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),l("el-form-item",{attrs:{label:"故障描述",prop:"bugTextarea"}},[l("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请具体描述问题，100个字符长度以内"},model:{value:e.form.bugTextarea,callback:function(t){e.$set(e.form,"bugTextarea",t)},expression:"form.bugTextarea"}})],1),l("el-form-item",{attrs:{label:"图片说明"}},[l("img",{attrs:{src:a("7159"),alt:""}})])],1)],1),l("el-tab-pane",{attrs:{label:"设备信息",name:"device"}},[l("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"IMEI"}},[l("el-input",{attrs:{readonly:""},model:{value:e.form.imei,callback:function(t){e.$set(e.form,"imei",t)},expression:"form.imei"}})],1),l("el-form-item",{attrs:{label:"设备类型"}},[l("el-input",{attrs:{readonly:""},model:{value:e.form.devieceType,callback:function(t){e.$set(e.form,"devieceType",t)},expression:"form.devieceType"}})],1),l("el-form-item",{attrs:{label:"安装时间"}},[l("el-input",{attrs:{readonly:""},model:{value:e.form.setupTime,callback:function(t){e.$set(e.form,"setupTime",t)},expression:"form.setupTime"}})],1)],1)],1),l("el-tab-pane",{attrs:{label:"用户信息",name:"user"}},[l("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"用户姓名"}},[l("el-input",{attrs:{readonly:""},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),l("el-form-item",{attrs:{label:"联系电话"}},[l("el-input",{attrs:{readonly:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),l("el-form-item",{attrs:{label:"地址"}},[l("el-input",{attrs:{readonly:""},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1)],1),"1"==e.status?l("el-tab-pane",{attrs:{label:"上门详情",name:"detail"}},[l("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"服务人员姓名"}},[l("el-input",{attrs:{readonly:""},model:{value:e.form.serviceMenberName,callback:function(t){e.$set(e.form,"serviceMenberName",t)},expression:"form.serviceMenberName"}})],1),l("el-form-item",{attrs:{label:"服务人员电话"}},[l("el-input",{attrs:{readonly:""},model:{value:e.form.serviceMenberPhone,callback:function(t){e.$set(e.form,"serviceMenberPhone",t)},expression:"form.serviceMenberPhone"}})],1),l("el-form-item",{attrs:{label:"过程描述"}},[l("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:6},placeholder:"",readonly:""},model:{value:e.form.detailTextarea,callback:function(t){e.$set(e.form,"detailTextarea",t)},expression:"form.detailTextarea"}})],1),l("el-form-item",{attrs:{label:"图片说明"}},[l("img",{attrs:{src:a("7159"),alt:""}})])],1)],1):e._e()],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.comfirm()}}},[e._v("确 定")])],1)],1):e._e()],1)},o=[],n={name:"order-detail-dialog",data:function(){return{visible:this.show,dialogTitle:this.title,activeName:"order",status:this.datas.status,form:{imei:"",devieceType:"",setupTime:"",repairTypeValue:"",bugType:[],orderTime:"2019-10-2 10:23:40",callTime:"",repairMenberValue:"",bugTextarea:"",userName:"",phone:"",address:"",serviceMenberName:"",serviceMenberPhone:"",detailTextarea:""},repairTypeOptions:[],repairMenberOptions:[],rules:{repairTypeValue:[{required:!0}],callTime:[{required:!0}],repairMenberValue:[{required:!0}],bugTextarea:[{required:!0}],bugType:[{required:!0}]}}},props:{show:{type:Boolean,default:!1},EDIT:{type:Boolean},datas:{type:Object},title:{type:String,default:""}},watch:{show:function(){var e=this;void 0!==this.datas&&this.datas!=={}&&this.$nextTick(function(){e.status=e.datas.status}),this.dialogTitle=this.title,this.visible=this.show,this.visible&&(this.getRepairOptionsData(),this.getRepairMenberOptionsData())}},created:function(){},methods:{comfirm:function(){this.visible=!1},getRepairOptionsData:function(){var e=this;this.$api.repairOrder.getRepairTypeOptions().then(function(t){e.repairTypeOptions=t.list}).catch(function(e){})},getRepairMenberOptionsData:function(){var e=this;this.$api.repairOrder.getRepairMenberOptions().then(function(t){e.repairMenberOptions=t.list}).catch(function(e){})},closeDialog:function(){this.form={imei:"",devieceType:"",setupTime:"",repairTypeValue:"",bugType:[],orderTime:"2019-10-2 10:23:40",callTime:"",repairMenberValue:"",bugTextarea:"",userName:"",phone:"",address:"",serviceMenberName:"",serviceMenberPhone:"",detailTextarea:""},this.$refs["form"]&&this.$refs["form"].resetFields(),this.activeName="order",this.$emit("update:show",!1)}}},s=n,c=a("2877"),p=Object(c["a"])(s,i,o,!1,null,"522e2336",null),u=p.exports,m={name:"repair-order",components:{orderDetailDialog:u},data:function(){return{tableData:[],loading:!1,cur_page:1,multipleSelection:[],selectWord:"",repairMenberValue:"",repairMenberOptions:[],repairTypeValue:"",repairTypeOptions:[],bugTypeOptions:[],bugTypeValue:"",orderTypeOptions:[],orderTypeValue:"",orderDetailDialog:{visible:!1,title:"",edit:!1,data:{}}}},created:function(){this.getRepairMenberOptionsData(),this.getRepairOptionsData(),this.getOrderTypeOptionsData(),this.getBugTypeOptionsData(),this.getData()},computed:{tableHeight:function(){return window.innerHeight-218+"px"}},methods:{handleCurrentChange:function(e){this.cur_page=e,this.getData()},getData:function(){var e=this;this.loading=!0,this.$api.repairOrder.getRepairOrderList().then(function(t){e.tableData=t.list,e.loading=!1}).catch(function(t){e.loading=!1})},getRepairMenberOptionsData:function(){var e=this;this.$api.repairOrder.getRepairMenberOptions().then(function(t){e.repairMenberOptions=t.list}).catch(function(e){})},getRepairOptionsData:function(){var e=this;this.$api.repairOrder.getRepairTypeOptions().then(function(t){e.repairTypeOptions=t.list}).catch(function(e){})},getOrderTypeOptionsData:function(){var e=this;this.$api.repairOrder.getOrderStatusOptions().then(function(t){e.orderTypeOptions=t.list}).catch(function(e){})},getBugTypeOptionsData:function(){var e=this;this.$api.repairOrder.getBugTypeOptions().then(function(t){e.bugTypeOptions=t.list}).catch(function(e){})},search:function(){this.getData()},handleEdit:function(e,t){this.orderDetailDialog={visible:!0,title:"编辑报修工单",edit:!0,data:{status:t.status,form:{}}}},handleDetail:function(e,t){this.orderDetailDialog={visible:!0,title:"报修工单详情",edit:!1,data:{status:t.status,form:{}}}},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该工单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$message({type:"success",message:"删除成功!"})}).catch(function(){})},handleSelectionChange:function(e){this.multipleSelection=e}}},d=m,f=Object(c["a"])(d,l,r,!1,null,null,null);t["default"]=f.exports}}]);